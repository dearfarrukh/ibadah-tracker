<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ibadah Tracker Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
font-family:-apple-system,BlinkMacSystemFont;
background:linear-gradient(135deg,#e0e7ff,#f8fafc);
margin:0;
padding:20px;
animation:fadeIn 0.6s ease-in-out;
}

@keyframes fadeIn{
from{opacity:0; transform:translateY(10px);}
to{opacity:1; transform:translateY(0);}
}

h1{
text-align:center;
font-weight:600;
margin-bottom:25px;
}

.card{
background:rgba(255,255,255,0.6);
backdrop-filter:blur(20px);
-webkit-backdrop-filter:blur(20px);
padding:18px;
border-radius:22px;
box-shadow:0 10px 30px rgba(0,0,0,0.08);
margin-bottom:20px;
transition:all 0.3s ease;
}

.card:hover{
transform:translateY(-3px);
}

button{
background:linear-gradient(135deg,#007aff,#0051ff);
color:white;
border:none;
padding:12px;
border-radius:16px;
margin-top:10px;
width:100%;
font-weight:600;
transition:all 0.2s ease;
}

button:active{
transform:scale(0.96);
}

input,select{
width:100%;
padding:12px;
border-radius:16px;
border:none;
margin-top:8px;
background:rgba(255,255,255,0.7);
box-shadow:inset 0 2px 6px rgba(0,0,0,0.05);
transition:all 0.2s ease;
}

input:focus,select:focus{
outline:none;
box-shadow:0 0 0 2px #007aff;
}

.task{
display:flex;
justify-content:space-between;
align-items:center;
padding:8px 0;
animation:slideUp 0.4s ease;
}

@keyframes slideUp{
from{opacity:0; transform:translateY(8px);}
to{opacity:1; transform:translateY(0);}
}

input[type="checkbox"]{
width:22px;
height:22px;
accent-color:#007aff;
transition:all 0.2s ease;
}

#lockScreen{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:linear-gradient(135deg,#e0e7ff,#f8fafc);
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
animation:fadeIn 0.4s ease;
}
</style>

<body>

<!-- LOCK SCREEN -->
<div id="lockScreen">
<h2>ğŸ”’ Enter PIN</h2>
<input type="password" id="pinInput" placeholder="Enter PIN">
<button onclick="unlock()">Unlock</button>
<p>Default PIN: 1234</p>
</div>

<div id="app" style="display:none">

<h1>ğŸ“¿ Ibadah Tracker</h1>

<!-- DATE PICKER -->
<div class="card">
<h3>ğŸ“… Select Date</h3>
<input type="date" id="datePicker" onchange="loadTasks()">
</div>

<!-- TASK LIST -->
<div class="card">
<h3>ğŸ“ Daily Tasks</h3>
<div id="taskContainer"></div>
</div>

<!-- TASK SETTINGS DROPDOWN -->
<div class="card">
<h3>âš™ï¸ Task Settings</h3>

<select id="actionSelect" onchange="handleAction()">
<option value="">Select Action</option>
<option value="add">â• Add Task</option>
<option value="delete">ğŸ—‘ Delete Task</option>
<option value="rename">âœï¸ Rename Task</option>
</select>

<div id="actionArea"></div>
</div>

<!-- STREAK -->
<div class="card">
<h3>ğŸ”¥ Streak</h3>
<p id="streakCount">0 Days</p>
</div>

<!-- MONTHLY REPORT -->
<div class="card">
<h3>ğŸ“Š Monthly Report</h3>
<p id="monthlyReport"></p>
</div>

</div>

<script>

let taskList = JSON.parse(localStorage.getItem("taskList")) || [
"Fajr","Dhuhur","Asr","Maghrib","Isha",
"Surah Mulk","Surah Sajdah","Surah Yaseen",
"Surah Rehman","Surah Taghabun","Surah Waqiya"
];

document.getElementById("datePicker").valueAsDate = new Date();

function unlock(){
let pin = document.getElementById("pinInput").value;
if(pin==="1234"){
document.getElementById("lockScreen").style.display="none";
document.getElementById("app").style.display="block";
loadTasks();
}
else{
alert("Wrong PIN");
}
}

function getSelectedDate(){
return document.getElementById("datePicker").value;
}

function loadTasks(){
let container = document.getElementById("taskContainer");
container.innerHTML="";
let date = getSelectedDate();
let saved = JSON.parse(localStorage.getItem(date)) || {};

taskList.forEach(task=>{
let div=document.createElement("div");
div.className="task";

div.innerHTML=`
<label>${task}</label>
<input type="checkbox" ${saved[task]?"checked":""}
onchange="toggleTask('${task}',this.checked)">
`;

container.appendChild(div);
});

updateStreak();
updateMonthlyReport();
}

function toggleTask(task,status){
let date=getSelectedDate();
let saved=JSON.parse(localStorage.getItem(date))||{};
saved[task]=status;
localStorage.setItem(date,JSON.stringify(saved));
updateStreak();
updateMonthlyReport();
}

function handleAction(){
let action=document.getElementById("actionSelect").value;
let area=document.getElementById("actionArea");
area.innerHTML="";

if(action==="add"){
area.innerHTML=`
<input type="text" id="newTaskName" placeholder="Enter task name">
<button onclick="confirmAdd()">Add</button>`;
}

if(action==="delete"){
let options=taskList.map(t=>`<option value="${t}">${t}</option>`).join("");
area.innerHTML=`
<select id="deleteTaskSelect">${options}</select>
<button onclick="confirmDelete()">Delete</button>`;
}

if(action==="rename"){
let options=taskList.map(t=>`<option value="${t}">${t}</option>`).join("");
area.innerHTML=`
<select id="renameSelect">${options}</select>
<input type="text" id="renameInput" placeholder="New name">
<button onclick="confirmRename()">Rename</button>`;
}
}

function confirmAdd(){
let name=document.getElementById("newTaskName").value.trim();
if(name && !taskList.includes(name)){
taskList.push(name);
localStorage.setItem("taskList",JSON.stringify(taskList));
loadTasks();
alert("Task Added");
}
}

function confirmDelete(){
let task=document.getElementById("deleteTaskSelect").value;
taskList=taskList.filter(t=>t!==task);
localStorage.setItem("taskList",JSON.stringify(taskList));
loadTasks();
alert("Task Deleted");
}

function confirmRename(){
let oldName=document.getElementById("renameSelect").value;
let newName=document.getElementById("renameInput").value.trim();
if(newName){
taskList=taskList.map(t=>t===oldName?newName:t);
localStorage.setItem("taskList",JSON.stringify(taskList));
loadTasks();
alert("Task Renamed");
}
}

function updateStreak(){
let streak=0;
let today=new Date();

for(let i=0;i<365;i++){
let date=new Date();
date.setDate(today.getDate()-i);
let key=date.toISOString().split("T")[0];
let saved=JSON.parse(localStorage.getItem(key));
if(saved && Object.values(saved).every(v=>v===true)){
streak++;
}
else{
break;
}
}

document.getElementById("streakCount").innerText=streak+" Days";
}

function updateMonthlyReport(){
let today=new Date();
let month=today.getMonth();
let year=today.getFullYear();
let completed=0;

for(let i=1;i<=31;i++){
let date=new Date(year,month,i);
if(date.getMonth()!==month) break;
let key=date.toISOString().split("T")[0];
let saved=JSON.parse(localStorage.getItem(key));
if(saved && Object.values(saved).every(v=>v===true)){
completed++;
}
}

document.getElementById("monthlyReport").innerText=
"Perfect Days This Month: "+completed;
}

</script>

</body>
</html>